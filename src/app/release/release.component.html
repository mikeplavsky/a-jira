<mat-card class="mat-elevation-z4" id="{{release.name}}">

  <mat-card-header>

    <mat-card-title>
      {{release.name}}
    </mat-card-title>

    <mat-card-subtitle></mat-card-subtitle>

    <mat-card-subtitle [ngClass]="'startDate'" mat-line>
      {{ release.startDate | date: 'mediumDate'}}
    </mat-card-subtitle>

    <mat-card-subtitle [ngClass]="'releaseDate'" mat-line>
      {{ release.releaseDate | date: 'mediumDate'}}
    </mat-card-subtitle>

    <mat-card-subtitle [ngClass]="'days'">
      {{ days() }} of {{ days(true) }} days
    </mat-card-subtitle>

    <mat-card-subtitle *ngIf="releaseStats$ | async as stats">

      <br>

      <mat-card-subtitle [ngClass]="'of-features'" *ngIf="!release.released; else releasedFeatures">
        {{ stats.done_features }} of
        {{ stats.features }} fs.
      </mat-card-subtitle>

      <ng-template #releasedFeatures>
        <mat-card-subtitle [ngClass]="'features'">
          {{ stats.features }} fs.
        </mat-card-subtitle>
      </ng-template>

      <mat-card-subtitle [ngClass]="'of-points'" *ngIf="!release.released;else releasedPoints">
        {{ stats.done_points}} of
        {{ stats.points}} ps.
      </mat-card-subtitle>

      <ng-template #releasedPoints>
        <mat-card-subtitle [ngClass]="'points'">
          {{ stats.points }} ps.
        </mat-card-subtitle>
      </ng-template>

      <ng-container *ngIf="!release.released">

        <br>

        <mat-card-subtitle [ngClass]="'left-features'">
          {{ stats.features - stats.done_features }} fs.
        </mat-card-subtitle>

        <mat-card-subtitle [ngClass]="'left-points'">
          {{ stats.points - stats.done_points }} ps.
        </mat-card-subtitle>

      </ng-container>

      <mat-card-subtitle [ngClass]="'velocity'">
        {{ velocity(stats) }} ps./sprint
      </mat-card-subtitle>
      <mat-card-subtitle [ngClass]="'left-sprints'">
        {{ prediction(stats) }} sprint(s)
      </mat-card-subtitle>

    </mat-card-subtitle>
  </mat-card-header>
</mat-card>